---
title: "Pre-Model Analysis and data preparation"
output: html_notebook
---

# Policy and Claims data exploration
As mentioned in previous lessons, we identified good and bad performers in term of portfolios. To identify, which group of people/companies are guilty for that performance we need **more granular data**. And so we received *Claims* and *Policy* data from out IT department.

Let's look at them.

## Exercise 1
Please make a few data checks (fields info, some summary stats, quality checks about missings, ...) as you learned in previous lessons.

You can follow up auxiliary questions in `loss_analysis.R` at Exercise 1.

Write a few sentences about what have you found and commit your notes.

# Policy vs. Claims data
#### Now the crucial questions: What are you gonna model and what data will you need for that purpose?

Write a few sentences about what do you think and commit your notes.


### Exercise 2
> Go to Exercise 2 and try to think about what could be a good 'target'/ event 
> you are trying to predict from data you have.

## Modeling data level
> Next question you should ask yourself before you jump directly into modeling is 
> How granular you need data to be prepared. 
> What makes sense to model in our case? Is it quality of the potential/future policy?
> Is it claim amount or something completely different?

Claims data are at *claims* level.
```{r}
library(dplyr)
dt_Claims <- read.csv("../../data/claims.csv")
dt_Claims %>% nrow()
dt_Claims %>% distinct(NrClaim) %>% nrow()
#dt_Claims %>% distinct(NrPolicy) %>% nrow() 
```
Policy data are at *policy* level.
```{r}
dt_Policy <- read.csv("../../data/policy_history.csv")
dt_Policy %>% nrow()
dt_Policy %>% distinct(NrPolicy) %>% nrow() 
```

vyrob exposuire, mergni claimy

## Target creation

urob tgarget viacere a vysvetli preco tieto davaju zmysel (severita~ gamma, frequencia~ poison) 

### One-Way
pouzitim targetu urob onw-way v ggplote a na DU moznost shiny?
urob jeden example ktory dava zmysel, a druhy nech najdu oni.



## First Model

ups 30% dat vyhodenych, preco?

lebo missiny v tvojich features, musis nakodit na "Unknown" categoricky elvel

